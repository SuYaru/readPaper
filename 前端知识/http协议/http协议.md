# http协议

**Q：https与http的区别是什么，为什么用https,不用http**

**A**：http是一种不安全的协议，在网络传输的过程中，容易被篡改。https在http的基础上增加了一层SSL加密通道，所有在网络上传输的数据（body）中的数据都会被加密，只有客户端与服务端持有密钥。达到保护信息的目的。

**Q：https是怎么进行加密的？**

**A：总的来说，是在握手的过程中交换信息，最终使得服务端和客户端拥有对称密钥和加密算法**

1. 客户端向服务端发送请求
2. 服务端向客户端相应并返回数字证书(包含公钥、服务端支持的加密算法、随机数)
3. 客户端选择加密算法并生成对称密钥，并用公钥返回给服务端
4. 服务端用私钥对加密后的对称密钥解密
5. 此时客户端和服务端均拥有对称密钥，可以进行通话

**Q：http2与http1的区别是什么？**

**A**：总的来说，http2基于TCP协议本身的特质做了一些优化，更加符合TCP协议规范，提升了网络传输效率。

   （1）http2采用二进制进行传输，减少了明文解析的过程，所以能够提升效率。

   （2）采用多路复用的方式，一个TCP链接上同时发送多个请求，提升TCP链接的利用率：合理利用了二进制的特点，将二进制进行分帧处理，在帧中通过标志位区分每一帧属于哪个流。

   （3）http2服务端可以主动向客户端推送消息。

   （4）http2可以设置请求的优先级、中断请求。（真正中断，利用帧中的流标志）。AbortController中断是将返回的promise置为reject。

   （5）http2对请求头进行了压缩。

**Q：TCP与UDP的区别**

**A：**TCP是基于连接的传输机制，有拥塞控制、流量控制，容错机制保障正确性。UDP不需要建立链接，没有拥塞、流量控制、正确性无法保障。

**Q：get与post的区别是什么**

**A**：

   （1）get与post在http标准中的定义区别是：get用来从服务端获取数据，post向服务端更新数据。

   （2）get在实际的使用中，请求参数在url中，url的长度由浏览器所限制。post的请求参数一般放在body中，（pathVariable）不算。

   （3）**post请求不会被浏览器缓存**

**Q：什么是跨域？**

**A：**跨域是：host、path、port三者之中，发起请求的域，与响应请求的域中有任意一个不同，请求会被浏览器拦截。

**Q：如何解决跨域问题**

**A：**（1）CROS：服务端配置accsess-alown-origin，可以配置允许访问的域。或者配置*允许所有人访问。客户端配置origin表示自己的请求来自哪里。withCredentials保证跨域的同时发送cookie信息。

   （2）使用jsonp，需要服务端配合。利用script发送请求，服务端在响应中返回callback+参数。

   （3）利用iframe,通过window.postMessage进行通信

   （4）利用nginx进行代理请求（服务端之间没有跨域限制）。

**Q：预检请求**

**A：**在http请求中，如果是复杂请求，在跨域的时候会发起一个prefetch的请求校验是否允许跨域。校验通过才会允许请求。

   （1）发起校验的条件，满足一下2个中的任意一个

         （1）head、get、post之外的请求

         （2）content-type是：`application/x-www-form-urlencoded`、`multipart/form-data`、`text/plainz` 之外的类型。header中有Last-Event-ID、Content-Language、Accept-Language、Accept之外的字段（一般都会变成复杂请求：自定义cookie之类的）

Link的prefetch、prelad

prefetch是提前加载，在

**Q：HTTP3.0**

**A：**HTTP3.0是基于QUIC的协议，主要是将TCP改成UDP，减少三次握手的时间。

   可靠性：拥塞控制、流量控制、错误校验等手段

   安全性：TLS

