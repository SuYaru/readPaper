### 内存处理

---

##### js 中的内存管理，什么情况会导致内存泄露？

内存分配:当我们申明变 、函数、对象的时候，系统会 动为他们分配内存
内存使 :即读写内存，也就是使 变 、函数等
内存回收:使 完毕，由垃圾回收机制 动回收 再使 的内存

##### js 中的垃圾回收机制

1. 引用计数
   引 计数算法定义“内存 再使 ”的标准很简单，就是看 个对象是否有指向它的引 。 如
   果没有其他对象指向它 ，说明该对象已经 再需 。 但它却存在 个致命的问题:循环引 。 如果两个对象相互引 ，尽管他们已 再使 ，垃圾回收 会进 回收，导致内存泄 。
2. 标记清除
   无法到达的对象
   2.1 在运行的时候给存储在内存中变量添加标记
   2.2 从根出发，能触达的变量，把标记清除
   2.3 那些剩下的有标记的变量则为要删除的变量
   2.4 最后垃圾收集 会执 最后 步内存清除的 作，销毁那些带标记的值并回收它们所
   占 的内存空间。

##### js 中常见的内存泄露

1. 闭包
2. 全局变量
3. 计时器、回调方法
4. DOM 的引用

##### 如何避免内存泄

1. 减少全局变量
2. 使用完变量后，及时清除引用


##### 内容计算
- object-sizeof

- 字符串 一个字符2个字节
- 布尔值 4个字节
- 数字值  8个字节
- null  为0

对象中key也占用空间
相同引用不占用空间

```
function fn(obj){
   const type=typeof obj;

   switch(type){
      case "string":
      case "number":
      case "boolean":
      case "object":{

      }
      case default:
         return 0;
   }
}
```
